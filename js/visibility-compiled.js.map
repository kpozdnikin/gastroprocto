{"version":3,"sources":["visibility.js"],"names":[],"mappings":"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","file":"visibility-compiled.js","sourcesContent":["/*!\n * # Semantic UI - Visibility\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n\"use strict\";\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.visibility = function(parameters) {\n  var\n    $allModules    = $(this),\n    moduleSelector = $allModules.selector || '',\n\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n    returnedValue,\n\n    moduleCount    = $allModules.length,\n    loadedCount    = 0\n  ;\n\n  $allModules\n    .each(function() {\n      var\n        settings        = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.visibility.settings, parameters)\n          : $.extend({}, $.fn.visibility.settings),\n\n        className       = settings.className,\n        namespace       = settings.namespace,\n        error           = settings.error,\n        metadata        = settings.metadata,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = 'module-' + namespace,\n\n        $window         = $(window),\n\n        $module         = $(this),\n        $context        = $(settings.context),\n\n        $placeholder,\n\n        selector        = $module.selector || '',\n        instance        = $module.data(moduleNamespace),\n\n        requestAnimationFrame = window.requestAnimationFrame\n          || window.mozRequestAnimationFrame\n          || window.webkitRequestAnimationFrame\n          || window.msRequestAnimationFrame\n          || function(callback) { setTimeout(callback, 0); },\n\n        element         = this,\n        disabled        = false,\n\n        contextObserver,\n        observer,\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.debug('Initializing', settings);\n\n          module.setup.cache();\n\n          if( module.should.trackChanges() ) {\n\n            if(settings.type == 'image') {\n              module.setup.image();\n            }\n            if(settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if(settings.observeChanges) {\n              module.observeChanges();\n            }\n            module.bind.events();\n          }\n\n          module.save.position();\n          if( !module.is.visible() ) {\n            module.error(error.visible, $module);\n          }\n\n          if(settings.initialCheck) {\n            module.checkVisibility();\n          }\n          module.instantiate();\n        },\n\n        instantiate: function() {\n          module.debug('Storing instance', module);\n          $module\n            .data(moduleNamespace, module)\n          ;\n          instance = module;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module');\n          if(observer) {\n            observer.disconnect();\n          }\n          if(contextObserver) {\n            contextObserver.disconnect();\n          }\n          $window\n            .off('load'   + eventNamespace, module.event.load)\n            .off('resize' + eventNamespace, module.event.resize)\n          ;\n          $context\n            .off('scroll'       + eventNamespace, module.event.scroll)\n            .off('scrollchange' + eventNamespace, module.event.scrollchange)\n          ;\n          if(settings.type == 'fixed') {\n            module.resetFixed();\n            module.remove.placeholder();\n          }\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        observeChanges: function() {\n          if('MutationObserver' in window) {\n            contextObserver = new MutationObserver(module.event.contextChanged);\n            observer        = new MutationObserver(module.event.changed);\n            contextObserver.observe(document, {\n              childList : true,\n              subtree   : true\n            });\n            observer.observe(element, {\n              childList : true,\n              subtree   : true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding visibility events to scroll and resize');\n            if(settings.refreshOnLoad) {\n              $window\n                .on('load'   + eventNamespace, module.event.load)\n              ;\n            }\n            $window\n              .on('resize' + eventNamespace, module.event.resize)\n            ;\n            // pub/sub pattern\n            $context\n              .off('scroll'      + eventNamespace)\n              .on('scroll'       + eventNamespace, module.event.scroll)\n              .on('scrollchange' + eventNamespace, module.event.scrollchange)\n            ;\n          }\n        },\n\n        event: {\n          changed: function(mutations) {\n            module.verbose('DOM tree modified, updating visibility calculations');\n            module.timer = setTimeout(function() {\n              module.verbose('DOM tree modified, updating sticky menu');\n              module.refresh();\n            }, 100);\n          },\n          contextChanged: function(mutations) {\n            [].forEach.call(mutations, function(mutation) {\n              if(mutation.removedNodes) {\n                [].forEach.call(mutation.removedNodes, function(node) {\n                  if(node == element || $(node).find(element).length > 0) {\n                    module.debug('Element removed from DOM, tearing down events');\n                    module.destroy();\n                  }\n                });\n              }\n            });\n          },\n          resize: function() {\n            module.debug('Window resized');\n            if(settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function() {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function() {\n            if(settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              }, settings.throttle);\n            }\n            else {\n              requestAnimationFrame(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function(event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          },\n        },\n\n        precache: function(images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n          var\n            imagesLength  = images.length,\n            loadedCounter = 0,\n            cache         = [],\n            cacheImage    = document.createElement('img'),\n            handleLoad    = function() {\n              loadedCounter++;\n              if (loadedCounter >= images.length) {\n                if ($.isFunction(callback)) {\n                  callback();\n                }\n              }\n            }\n          ;\n          while (imagesLength--) {\n            cacheImage         = document.createElement('img');\n            cacheImage.onload  = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src     = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n\n        enableCallbacks: function() {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n\n        disableCallbacks: function() {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n\n        should: {\n          trackChanges: function() {\n            if(methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n\n        setup: {\n          cache: function() {\n            module.cache = {\n              occurred : {},\n              screen   : {},\n              element  : {},\n            };\n          },\n          image: function() {\n            var\n              src = $module.data(metadata.src)\n            ;\n            if(src) {\n              module.verbose('Lazy loading image', src);\n              settings.once           = true;\n              settings.observeChanges = false;\n\n              // show when top visible\n              settings.onOnScreen = function() {\n                module.debug('Image on screen', element);\n                module.precache(src, function() {\n                  module.set.image(src, function() {\n                    loadedCount++;\n                    if(loadedCount == moduleCount) {\n                      settings.onAllLoaded.call(this);\n                    }\n                    settings.onLoad.call(this);\n                  });\n                });\n              };\n            }\n          },\n          fixed: function() {\n            module.debug('Setting up fixed');\n            settings.once           = false;\n            settings.observeChanges = false;\n            settings.initialCheck   = true;\n            settings.refreshOnLoad  = true;\n            if(!parameters.transition) {\n              settings.transition = false;\n            }\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n            settings.onTopPassed = function() {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n              if(settings.transition) {\n                if($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n            settings.onTopPassedReverse = function() {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n\n        create: {\n          placeholder: function() {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module\n              .clone(false)\n              .css('display', 'none')\n              .addClass(className.placeholder)\n              .insertAfter($module)\n            ;\n          }\n        },\n\n        show: {\n          placeholder: function() {\n            module.verbose('Showing placeholder');\n            $placeholder\n              .css('display', 'block')\n              .css('visibility', 'hidden')\n            ;\n          }\n        },\n        hide: {\n          placeholder: function() {\n            module.verbose('Hiding placeholder');\n            $placeholder\n              .css('display', 'none')\n              .css('visibility', '')\n            ;\n          }\n        },\n\n        set: {\n          fixed: function() {\n            module.verbose('Setting element to fixed position');\n            $module\n              .addClass(className.fixed)\n              .css({\n                position : 'fixed',\n                top      : settings.offset + 'px',\n                left     : 'auto',\n                zIndex   : settings.zIndex\n              })\n            ;\n            settings.onFixed.call(element);\n          },\n          image: function(src, callback) {\n            $module\n              .attr('src', src)\n            ;\n            if(settings.transition) {\n              if( $.fn.transition !== undefined ) {\n                $module.transition(settings.transition, settings.duration, callback);\n              }\n              else {\n                $module.fadeIn(settings.duration, callback);\n              }\n            }\n            else {\n              $module.show();\n            }\n          }\n        },\n\n        is: {\n          onScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.onScreen;\n          },\n          offScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.offScreen;\n          },\n          visible: function() {\n            if(module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n            return false;\n          }\n        },\n\n        refresh: function() {\n          module.debug('Refreshing constants (width/height)');\n          if(settings.type == 'fixed') {\n            module.resetFixed();\n          }\n          module.reset();\n          module.save.position();\n          if(settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n          settings.onRefresh.call(element);\n        },\n\n        resetFixed: function () {\n          module.remove.fixed();\n          module.remove.occurred();\n        },\n\n        reset: function() {\n          module.verbose('Resetting all cached values');\n          if( $.isPlainObject(module.cache) ) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n\n        checkVisibility: function(scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if( !disabled && module.is.visible() ) {\n\n            // save scroll position\n            module.save.scroll(scroll);\n\n            // update calculations derived from scroll\n            module.save.calculations();\n\n            // percentage\n            module.passed();\n\n            // reverse (must be first)\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse();\n\n            // one time\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed();\n\n            // on update callback\n            if(settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n\n        passed: function(amount, newCallback) {\n          var\n            calculations   = module.get.elementCalculations(),\n            amountInPixels\n          ;\n          // assign callback\n          if(amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          }\n          else if(amount !== undefined) {\n            return (module.get.pixelsPassed(amount) > calculations.pixelsPassed);\n          }\n          else if(calculations.passing) {\n            $.each(settings.onPassed, function(amount, callback) {\n              if(calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              }\n              else if(!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n\n        onScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOnScreen,\n            callbackName = 'onScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n          if(calculations.onScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n\n        offScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOffScreen,\n            callbackName = 'offScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n          if(calculations.offScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n\n        passing: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassing,\n            callbackName = 'passing'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n          if(calculations.passing) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n\n\n        topVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisible,\n            callbackName = 'topVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n          if(calculations.topVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n\n        bottomVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisible,\n            callbackName = 'bottomVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n          if(calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n\n        topPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassed,\n            callbackName = 'topPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n          if(calculations.topPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n\n        bottomPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassed,\n            callbackName = 'bottomPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n          if(calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n\n        passingReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassingReverse,\n            callbackName = 'passingReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n          if(!calculations.passing) {\n            if(module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n\n\n        topVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisibleReverse,\n            callbackName = 'topVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n          if(!calculations.topVisible) {\n            if(module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n\n        bottomVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisibleReverse,\n            callbackName = 'bottomVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n          if(!calculations.bottomVisible) {\n            if(module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n\n        topPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassedReverse,\n            callbackName = 'topPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n          if(!calculations.topPassed) {\n            if(module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n\n        bottomPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassedReverse,\n            callbackName = 'bottomPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n          if(!calculations.bottomPassed) {\n            if(module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n\n        execute: function(callback, callbackName) {\n          var\n            calculations = module.get.elementCalculations(),\n            screen       = module.get.screenCalculations()\n          ;\n          callback = callback || false;\n          if(callback) {\n            if(settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n            else if(!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n          module.save.occurred(callbackName);\n        },\n\n        remove: {\n          fixed: function() {\n            module.debug('Removing fixed position');\n            $module\n              .removeClass(className.fixed)\n              .css({\n                position : '',\n                top      : '',\n                left     : '',\n                zIndex   : ''\n              })\n            ;\n            settings.onUnfixed.call(element);\n          },\n          placeholder: function() {\n            module.debug('Removing placeholder content');\n            if($placeholder) {\n              $placeholder.remove();\n            }\n          },\n          occurred: function(callback) {\n            if(callback) {\n              var\n                occurred = module.cache.occurred\n              ;\n              if(occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            }\n            else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n\n        save: {\n          calculations: function() {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function(callback) {\n            if(callback) {\n              if(module.cache.occurred[callback] === undefined || (module.cache.occurred[callback] !== true)) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function(scrollPosition) {\n            scrollPosition      = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function() {\n            var\n              scroll     = module.get.scroll(),\n              lastScroll = module.get.lastScroll(),\n              direction\n            ;\n            if(scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            }\n            else if(scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            }\n            else {\n              direction = 'static';\n            }\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            var\n              element = module.cache.element,\n              screen  = module.get.screenSize()\n            ;\n            module.verbose('Saving element position');\n            // (quicker than $.extend)\n            element.fits          = (element.height < screen.height);\n            element.offset        = $module.offset();\n            element.width         = $module.outerWidth();\n            element.height        = $module.outerHeight();\n            // store\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function() {\n            var\n              screen     = module.get.screenCalculations(),\n              element    = module.get.elementPosition()\n            ;\n            // offset\n            if(settings.includeMargin) {\n              element.margin        = {};\n              element.margin.top    = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top    = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            }\n            else {\n              element.top    = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            }\n\n            // visibility\n            element.topVisible       = (screen.bottom >= element.top);\n            element.topPassed        = (screen.top >= element.top);\n            element.bottomVisible    = (screen.bottom >= element.bottom);\n            element.bottomPassed     = (screen.top >= element.bottom);\n            element.pixelsPassed     = 0;\n            element.percentagePassed = 0;\n\n            // meta calculations\n            element.onScreen  = (element.topVisible && !element.bottomPassed);\n            element.passing   = (element.topPassed && !element.bottomPassed);\n            element.offScreen = (!element.onScreen);\n\n            // passing calculations\n            if(element.passing) {\n              element.pixelsPassed     = (screen.top - element.top);\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function() {\n            var\n              scroll = module.get.scroll()\n            ;\n            module.save.direction();\n            module.cache.screen.top    = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function() {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n\n        get: {\n          pixelsPassed: function(amount) {\n            var\n              element = module.get.elementCalculations()\n            ;\n            if(amount.search('%') > -1) {\n              return ( element.height * (parseInt(amount, 10) / 100) );\n            }\n            return parseInt(amount, 10);\n          },\n          occurred: function(callback) {\n            return (module.cache.occurred !== undefined)\n              ? module.cache.occurred[callback] || false\n              : false\n            ;\n          },\n          direction: function() {\n            if(module.cache.direction === undefined) {\n              module.save.direction();\n            }\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n            return module.cache.element;\n          },\n          elementCalculations: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n            return module.cache.element;\n          },\n          screenCalculations: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n            return module.cache.screen;\n          },\n          scroll: function() {\n            if(module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n            return module.cache.scroll;\n          },\n          lastScroll: function() {\n            if(module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n            return module.cache.screen.top;\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.visibility.settings = {\n\n  name                   : 'Visibility',\n  namespace              : 'visibility',\n\n  debug                  : false,\n  verbose                : false,\n  performance            : true,\n\n  // whether to use mutation observers to follow changes\n  observeChanges         : true,\n\n  // check position immediately on init\n  initialCheck           : true,\n\n  // whether to refresh calculations after all page images load\n  refreshOnLoad          : true,\n\n  // whether to refresh calculations after page resize event\n  refreshOnResize        : true,\n\n  // should call callbacks on refresh event (resize, etc)\n  checkOnRefresh         : true,\n\n  // callback should only occur one time\n  once                   : true,\n\n  // callback should fire continuously whe evaluates to true\n  continuous             : false,\n\n  // offset to use with scroll top\n  offset                 : 0,\n\n  // whether to include margin in elements position\n  includeMargin          : false,\n\n  // scroll context for visibility checks\n  context                : window,\n\n  // visibility check delay in ms (defaults to animationFrame)\n  throttle               : false,\n\n  // special visibility type (image, fixed)\n  type                   : false,\n\n  // z-index to use with visibility 'fixed'\n  zIndex                 : '10',\n\n  // image only animation settings\n  transition             : 'fade in',\n  duration               : 1000,\n\n  // array of callbacks for percentage\n  onPassed               : {},\n\n  // standard callbacks\n  onOnScreen             : false,\n  onOffScreen            : false,\n  onPassing              : false,\n  onTopVisible           : false,\n  onBottomVisible        : false,\n  onTopPassed            : false,\n  onBottomPassed         : false,\n\n  // reverse callbacks\n  onPassingReverse       : false,\n  onTopVisibleReverse    : false,\n  onBottomVisibleReverse : false,\n  onTopPassedReverse     : false,\n  onBottomPassedReverse  : false,\n\n  // special callbacks for image\n  onLoad                 : function() {},\n  onAllLoaded            : function() {},\n\n  // special callbacks for fixed position\n  onFixed                : function() {},\n  onUnfixed              : function() {},\n\n  // utility callbacks\n  onUpdate               : false, // disabled by default for performance\n  onRefresh              : function(){},\n\n  metadata : {\n    src: 'src'\n  },\n\n  className: {\n    fixed       : 'fixed',\n    placeholder : 'placeholder'\n  },\n\n  error : {\n    method  : 'The method you called is not defined.',\n    visible : 'Element is hidden, you must call refresh after element becomes visible'\n  }\n\n};\n\n})( jQuery, window, document );\n"]}